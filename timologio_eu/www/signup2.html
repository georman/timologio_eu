<head>
<style>
 .select_st select {
    width: 100%;
    height: 42px;
    font-size: 15px;
    padding-left: 10px;
    border-radius: 3px;
    border: 1px solid #CCC;
    padding: 6px 4px;
    outline: medium none;
    color: #777;
    margin: 0px 0px 20px;
    max-width: 100%;
    display: block;
    background: #FFF none repeat scroll 0% 0%;
    font-family: "Lato",sans-serif;
}</style>

<script>
	$(document).ready(function() {

	  // button for sign-up event

	  $('.btn-request').click(function() {

	    // hide any message
	    $("#form-alert").toggle(false);

	    var args = {
	        sender_name: $('[name="sender_name"]').val(),
	        subdomain: $('[name="subdomain"]').val(),
	        company_name: $('[name="company_name"]').val(),
	        company_afm: $('[name="company_afm"]').val(),
	        email: $('[name="email"]').val(),
	        phone: $('[name="phone"]').val(),
	        product: $('[name="product"]').val(),
	      }

	    // all mandatory
	    if(!(args.sender_name && args.company_name && args.company_afm && args.subdomain && args.email
	        && args.phone)) {
	       frappe.msgprint("All fields are necessary. Please try again.");
	       return;
	    }

			// email is valid
			if(!valid_email(args.email)) {
				frappe.msgprint('Please enter a valid Email Address.');
				return false;
			}

	    		// subdomain in one word
			if(args.subdomain.search(/^[a-z0-9][-a-z0-9]*[a-z0-9]$/)===-1) {
				frappe.msgprint("Sub-domain can only contain letters, numbers and hyphens. Please try again.");
				return false;
			}

			var MAX_LENGTH = 20;
			if(args.subdomain.length > MAX_LENGTH) {
				frappe.msgprint("Sub-domain can not have more than " + MAX_LENGTH + " characters.");
				return false;
			}

	    // compose the message
	    var message = "Company: " + args.company_name + "\n"
	        + "AFM: " + args.company_afm + "\n"
	        + "Name: " + args.sender_name + "\n"
	        + "Subdomain: " + args.subdomain + "\n"
	        + "Email: " + args.email + "\n"
	        + "Phone: " + args.phone + "\n"
	        + "Product: " + args.product

	    erpnext.send_message({
	      subject:'New Website Query',
	      sender: $('[name="email"]').val(),
	      status: 'Open',
	      message: message,
	      callback: function(r) {
	            // print return message
	        msgprint(r.message);

	if(r.message==="okay") {
				frappe.msgprint("Ta kataferes filarako.");

			}


	            // clear all inputs
	        $(':input').val('');
	      }
	    });
	  });

	});

	var msgprint = function(txt) {
	    $("#form-alert").html(txt).toggle(true);
	}

	</script>

</head>

<!-- title: SignUp -->
<!-- no-sidebar -->

<h1 class="text-center">
	Sign Up
</h1>

<br>
<div class="container" style="max-width: 700px;">
    <div class="row">
        <div class="col-sm-offset-2 col-sm-8">
            <div class="form-group">
                <div class="input-group">
                    <input name="subdomain" placeholder="mycompany" class="form-control" type="text">	<span class="input-group-addon">.timologio.gr</span>

                </div>
                <p class="help-block">Your subdomain i.e. https://<strong class="subdomain-help">mycompany</strong>.timologio.gr
                    <br>Must contain only letters, no spaces, numbers or special characters.</p>
            </div>
            <div class="form-group">
                <input name="company_name" placeholder="My Company" class="form-control" type="text">
                <p class="help-block">Full Name of your Company</p>
            </div>
            <div class="form-group">
                <input name="company_afm" placeholder="123456789" class="form-control" type="text">
                <p class="help-block">AFM of your Company</p>
            </div>
            <div class="form-group">
                <input name="sender_name" placeholder="Jane Doe" class="form-control" type="text">
                <p class="help-block">Your First and Last Name <em>(will appear in your user id)</em>

                </p>
            </div>
            <div class="form-group">
                <input name="email" placeholder="jane_doe@example.com" class="form-control" type="text">
                <p class="help-block">Your Email Address <em>(your login details will be emailed here)</em>

                </p>
            </div>
            <div class="form-group">
                <input name="phone" placeholder="210 1234567" class="form-control" type="text">
                <p class="help-block">Your Phone Number</p>
            </div>
            <div class="form-group" class="form-control">
                <p class="help-block">Which Product are you interested in?</p>
                <select name="product">
                    <option value="Product 1">Product 1</option>
                    <option value="Product 2">Product 2</option>
                    <option value="Product 3">Product 3</option>
                </select>
                <br>
                <br>
                <div id="form-alert" class="alert" style="display: none; margin-bottom: 10px;"></div>
                <div class="form-group text-center">
                    <button class="large blue button btn btn-success btn-request">Send Inquiry</button>
                    <br>
                </div>
                <br>
            </div>
        </div>
    </div>
</div>
